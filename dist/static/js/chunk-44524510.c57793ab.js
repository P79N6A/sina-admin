(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44524510"],{"17c2":function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"b",function(){return c});var n=a("f8c8"),o=a("a27e");function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"10";return t=JSON.stringify(t),Object(o["a"])({url:"".concat(n["a"],"/4/data/dspActStat"),method:"get",params:{source:n["b"],dt:t,material_pos:e,is_material:a,limit:r}})}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"real_time@all";return t=JSON.stringify(t),Object(o["a"])({url:"".concat(n["a"],"/4/data/dspActStat"),method:"get",params:{source:n["b"],dt:t,material_pos:e}})}},3328:function(t,e,a){},4366:function(t,e,a){"use strict";var n=a("c5bb"),o=a.n(n);o.a},a27e:function(t,e,a){"use strict";var n=a("bc3a"),o=a.n(n),r=o.a.create({baseURL:"",timeout:5e3});r.interceptors.request.use(),r.interceptors.response.use(),e["a"]=r},c466:function(t,e,a){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date,o=n.getMonth()+1+e<10?"0".concat(n.getMonth()+1):n.getMonth()+1+e,r=n.getDate()+a<10?"0".concat(n.getDate()):n.getDate()+a;return"".concat(n.getFullYear()+t).concat(o).concat(r)}function o(){var t=new Date,e=t.getHours()<10?"0".concat(t.getHours()):t.getHours(),a=t.getMinutes()<10?"00":t.getMinutes();return"".concat(e,":").concat(a)}function r(t){var e=t?new Date(t):new Date;return{timestamp:Date.parse(e),year:e.getFullYear(),month:e.getMonth()+1<10?"0".concat(e.getMonth()+1):e.getMonth()+1,day:e.getDate()<10?"0".concat(e.getDate()):e.getDate(),hour:e.getHours()<10?"0".concat(e.getHours()):e.getHours(),minute:e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes(),second:e.getSeconds()<10?"0".concat(e.getSeconds()):e.getSeconds()}}a.d(e,"b",function(){return n}),a.d(e,"a",function(){return o}),a.d(e,"c",function(){return r})},c5bb:function(t,e,a){},cc4c:function(t,e,a){"use strict";a.d(e,"a",function(){return l}),a.d(e,"c",function(){return i}),a.d(e,"d",function(){return s}),a.d(e,"b",function(){return u});a("28a5"),a("55dd"),a("ac6a"),a("456d");var n={product:"send_prod",uv:"send_uv",pv:"send_pv"},o={product:"action_prod",uv:"action_uv",pv:"action_pv"},r=["action_statistic","send_statistic"],c=[o,n];function l(t){var e=[];if(0===Object.keys(t.data).length)return e;var a=[];return Object.keys(t.data).forEach(function(e){a.push({date_time:e,value:t.data[e]})}),a[0].value.material_pos.forEach(function(t){e.push({label:t+"",value:t+""})}),e}function i(t,e){var a=[];if(0===Object.keys(t.data).length)return a;var n=0;return Object.keys(t.data).forEach(function(o){a.push({date_time:o});for(var l=t.data[o],i=function(t){Object.keys(l[r[t]][e]).forEach(function(o){a[n][c[t][o]]=l[r[t]][e][o]})},s=0;s<r.length;s++)i(s);n++}),a}function s(t,e){var a=[];if(0===Object.keys(t.data).length)return a;var n=t.data;Object.keys(n).forEach(function(t){a.push({date_time:t})});for(var o=function(t){var o=n[a[t]["date_time"]]["material_statistic"][e];Object.keys(o).forEach(function(e){Object.keys(o[e]).forEach(function(n){a[t]["".concat(e,"_").concat(n)]=o[e][n]})})},r=0;r<a.length;r++)o(r);return a}function u(t){var e=[],a=[],n=[];if(t.errcode||0===Object.keys(t.data).length)return{posRes:a,todayRes:e,legends:n};var o=t.data,r=Object.keys(o)[0],c=o[r]["action_statistic"];return Object.keys(c).forEach(function(t){n.push(t)}),Object.keys(o).sort().forEach(function(t,n){var r=d(t);console.log(r),e.push([r]),a.push([r]);var c=o[t]["action_statistic"];Object.keys(c).forEach(function(t){e[n].push(c[t]["today"]?c[t]["today"]:0),a[n].push(c[t]["10p"]?c[t]["10p"]:0)})}),{posRes:a,todayRes:e,legends:n}}function d(t){var e=t.split("");return"".concat(e[0]).concat(e[1],":").concat(e[2]).concat(e[3])}},ebcd:function(t,e,a){"use strict";var n=a("3328"),o=a.n(n);o.a},ee23:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",{staticClass:"header-text-line-height h1-font header-bottom-border"},[t._v("\n    用户行为\n  ")]),t._v(" "),a("el-main",[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-container",[a("el-main",{staticClass:"bold-weight-font el-main-1"},[t._v("\n            date_time:\n          ")]),t._v(" "),a("el-footer",{staticClass:"el-main-1"},[a("el-date-picker",{staticClass:"width-banner",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyyMMdd"},model:{value:t.dateValue,callback:function(e){t.dateValue=e},expression:"dateValue"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6,offset:1}},[a("el-container",[a("el-main",{staticClass:"bold-weight-font el-main-1"},[t._v("\n            material_pos:\n          ")]),t._v(" "),a("el-footer",{staticClass:"el-main-1"},[a("el-select",{attrs:{placeholder:""},model:{value:t.totalValue,callback:function(e){t.totalValue=e},expression:"totalValue"}},t._l(t.totalOptions,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"btn-margin",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchInfo}},[t._v("查询")])],1)],1),t._v(" "),a("el-row",{staticClass:"common-container top-radius"},[a("el-col",{attrs:{span:24}},[a("panel-top",{attrs:{title:"用户行为数据查询结果"}}),t._v(" "),a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-col",{staticClass:"table-margin",attrs:{span:24}},[a("data-table",{attrs:{"table-data":t.currTableData,"secondary-data":t.secondaryData,"filter-field":t.filterValue}})],1)],1)],1)],1)],1)],1)},o=[],r=a("7c1d"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{attrs:{data:t.tableData,stripe:""}},t._l(t.tableOptions,function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label}})}),1)],1),t._v(" "),"date_time"!==t.filterField?a("el-col",{staticClass:"secondary",attrs:{span:24}},[a("el-table",{attrs:{data:t.secondaryData,stripe:""}},[a("el-table-column",{attrs:{label:"日期",prop:"date_time"}}),t._v(" "),a("el-table-column",{attrs:{label:"点击"}},t._l(t.secondaryOptions,function(t,e){return a("el-table-column",{key:e,attrs:{prop:"action_"+t.prop,label:t.label}})}),1),t._v(" "),a("el-table-column",{attrs:{label:"下发"}},t._l(t.secondaryOptions,function(t,e){return a("el-table-column",{key:e,attrs:{prop:"send_"+t.prop,label:t.label}})}),1),t._v(" "),a("el-table-column",{attrs:{label:"比率"}},t._l(t.secondaryOptions,function(t,e){return a("el-table-column",{key:e,attrs:{prop:"rate_"+t.prop,label:t.label}})}),1)],1)],1):t._e()],1)},l=[],i=[{prop:"date_time",label:"日期"},{prop:"send_pv",label:"下发pv"},{prop:"send_uv",label:"下发uv"},{prop:"send_prod",label:"下发素材"},{prop:"action_pv",label:"点击pv"},{prop:"action_uv",label:"点击uv"},{prop:"action_prod",label:"点击素材"}],s=[{prop:"10p",label:"10p"},{prop:"50p",label:"50p"},{prop:"90p",label:"90p"},{prop:"av",label:"av"}],u={name:"DataTable",props:{tableData:{type:Array,default:null},filterField:{type:String,default:"date_time"},secondaryData:{type:Array,default:null}},data:function(){return{tableOptions:i,secondaryOptions:s}}},d=u,p=(a("4366"),a("2877")),f=Object(p["a"])(d,c,l,!1,null,"1848e712",null),b=f.exports,h=a("17c2"),v=a("c466"),m=a("cc4c"),g={name:"BehaviorTable",components:{PanelTop:r["a"],DataTable:b},data:function(){return{totalValue:"total",totalOptions:[],dateValue:"",currTableData:[],filterValue:"date_time",secondaryData:[],loading:!1,defaultDate:""}},created:function(){this._initdefaultDate(),this.initApiData(this._initDtParams())},methods:{searchInfo:function(){if(this.dateValue&&2===this.dateValue.length){if(!this._checkDtParams())return console.log(this._checkDtParams()),this.$message.error("仅支持查询包含前一天的数据"),this.dateValue.length=0,!1;this.loading=!0,"total"!==this.totalValue?(this.filterValue="",this.initApiData(this._initDtParams(),!1)):(this.filterValue="date_time",this.initApiData(this._initDtParams()))}else this.$message.error("查询项存在空项")},_initDtParams:function(){return{start_time:"".concat(Object(v["c"])(+this.dateValue[0]).year).concat(Object(v["c"])(+this.dateValue[0]).month).concat(Object(v["c"])(+this.dateValue[0]).day),end_time:"".concat(Object(v["c"])(+this.dateValue[1]).year).concat(Object(v["c"])(+this.dateValue[1]).month).concat(Object(v["c"])(+this.dateValue[1]).day)}},_checkDtParams:function(){for(var t=Object(v["c"])().timestamp,e=0;e<2;e++)if(+this.dateValue[e]>t)return!1;return!0},_initdefaultDate:function(){var t=Object(v["c"])(),e=t.timestamp,a=+e-6048e5,n=+e-864e5;this.dateValue=[new Date(a),new Date(n)]},initApiData:function(t){var e=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(h["a"])(t,this.totalValue).then(function(t){e.totalOptions=Object(m["a"])(t.data),e.currTableData=Object(m["c"])(t.data,e.totalValue),a||(e.secondaryData=Object(m["d"])(t.data,e.totalValue)),0===e.currTableData.length&&(e.totalValue="total"),e.loading=!1}).catch(function(t){e.loading=!1,console.log(t),e.$notify({title:"未知错误",message:"请检查网络后刷新重试",type:"error"})})}}},_=g,y=(a("ebcd"),Object(p["a"])(_,n,o,!1,null,"020fa667",null));e["default"]=y.exports},f8c8:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o});var n="",o="3567320871234567890"}}]);