(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-626a15d5"],{"19f9":function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n}),a.d(e,"c",function(){return i});var s=[{value:"cat_ids",label:"cat_ids"},{value:"city_level",label:"city_level"},{value:"obj_ids",label:"obj_ids"},{value:"user_type_id",label:"user_type_id"},{value:"reg_time",label:"reg_time"},{value:"gender",label:"gender"},{value:"age",label:"age"},{value:"tag_ids",label:"tag_ids"},{value:"value",label:"value"}],n=[{value:"task_id",label:"task_id"},{value:"date_time",label:"date_time"}],i=[{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]},"6a25":function(t,e,a){"use strict";var s=a("bc3a"),n=a.n(s),i=n.a.create({baseURL:"",timeout:5e3});i.interceptors.request.use(),i.interceptors.response.use();var r=i,l="";function o(){return r({url:"".concat(l,"/4/data/dspFeaDataStat"),method:"get",params:{cip:230,source:"3567320871234567890",type:"coverage",taskIds:"all",dts:"all"}})}function u(t,e){return r({url:"".concat(l,"/4/data/dspFeaDataStat"),method:"get",params:{cip:230,source:"3567320871234567890",type:e,taskIds:t,dts:"[]"}})}function c(t,e){return r({url:"".concat(l,"/4/data/dspFeaDataStat"),method:"get",params:{cip:230,source:"3567320871234567890",type:e,taskIds:"[]",dts:t}})}function d(){return r({url:"".concat(l,"/4/data/dspFeaDataStat"),method:"get",params:{source:"3567320871234567890",cip:230,taskIds:"[]",dts:"[]",type:"all",isTaskIds:!0,isDts:!0}})}a.d(e,"a",function(){return o}),a.d(e,"d",function(){return u}),a.d(e,"c",function(){return d}),a.d(e,"b",function(){return c})},"7c1d":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("el-col",{staticClass:"normal-padding table-wrap-top top-radius",attrs:{span:24}},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:8}},[a("svg-icon",{attrs:{"icon-class":t.iconClass}}),t._v(" "),a("span",{staticClass:"h3-font"},[t._v(t._s(t.title))])],1),t._v(" "),a("el-col",{staticClass:"text-align-right",attrs:{span:8}},[t._t("count")],2)],1)],1)],1)},n=[],i={name:"PanelTop",props:{title:{type:String,default:""},iconClass:{type:String,default:"nested"}},data:function(){return{}}},r=i,l=(a("8a0a"),a("2877")),o=Object(l["a"])(r,s,n,!1,null,"07d54158",null);e["a"]=o.exports},"8a0a":function(t,e,a){"use strict";var s=a("f8a7"),n=a.n(s);n.a},b8de:function(t,e,a){},c466:function(t,e,a){"use strict";function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=t.getMonth()+1<10?"0".concat(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0".concat(t.getDate()):t.getDate();return"".concat(t.getFullYear()).concat(e).concat(a)}a.d(e,"a",function(){return s})},c4e2:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",{staticClass:"header-text-line-height h1-font header-bottom-border"},[t._v("数据分析展示")]),t._v(" "),a("el-main",[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:t.fieldValue,callback:function(e){t.fieldValue=e},expression:"fieldValue"}},t._l(t.fieldOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:8,offset:1}},[a("el-select",{directives:[{name:"show",rawName:"v-show",value:"task_id"===t.fieldValue,expression:"fieldValue==='task_id'"}],staticStyle:{width:"100%"},attrs:{multiple:"","multiple-limit":5,placeholder:"请选择",size:"small"},model:{value:t.passiveValue,callback:function(e){t.passiveValue=e},expression:"passiveValue"}},t._l(t.passiveOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"task_id"!==t.fieldValue,expression:"fieldValue!=='task_id'"}],staticStyle:{width:"90%"},attrs:{type:"dates",format:"yyyyMMdd",placeholder:"选择一个或多个日期",size:"small"},on:{change:t.change},model:{value:t.dateValue,callback:function(e){t.dateValue=e},expression:"dateValue"}})],1),t._v(" "),a("el-col",{attrs:{span:3,offset:1}},[a("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:t.extraValue,callback:function(e){t.extraValue=e},expression:"extraValue"}},t._l(t.extraOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:2,offset:2},nativeOn:{click:function(e){return t.searchTargetValue(e)}}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"}},[t._v("查询")])],1)],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"common-container top-radius",attrs:{span:24}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("panel-top",{attrs:{title:"数据分布展示"}})],1)],1),t._v(" "),a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[t.showCharts?a("el-col",{attrs:{span:24}},[a("charts-data",{attrs:{"curr-charts-data":t.currChartsData,"x-alias-name":t.extraValue,legends:t.keys}})],1):t._e()],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:22,offset:1}},[a("el-table",{staticStyle:{width:"100%",marginBottom:"20px",marginTop:"20px"},attrs:{data:t.UidCountTable,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"key",label:"key",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"uid_count",label:"uid_count",sortable:""}})],1)],1)],1)],1)],1)],1),t._v(" "),a("el-footer")],1)},n=[],i=a("f23a"),r=a("6a25"),l=a("19f9"),o=a("c466"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("el-col",[a("histogram",{attrs:{height:"400px",source:t.currChartsData,"x-axis-name":t.xAliasName,legends:t.legends}})],1)],1)},c=[],d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:{width:t.width,height:t.height},attrs:{id:t.chartId}})},h=[],f=a("313e"),p=a.n(f),v=a("f42c"),g={name:"Histogram",mixins:[v["a"]],props:{width:{type:String,default:"100%"},height:{type:String,default:"300px"},source:{type:Array,default:null},xAxisName:{type:String,default:""},title:{type:String,default:"数据分布展示"},uidCount:{type:String,default:"0"},chartId:{type:String,default:"0"},tipName:{type:String,default:"次数"},legends:{type:Array,default:null}},data:function(){return{chart:null}},watch:{source:{handler:function(){this.initChart()},deep:!0}},mounted:function(){this.initChart()},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{_initSeries:function(){var t=[];if(this.source)for(var e=this.source[0].length-1,a=0;a<e;a++)t.push({name:this.legends[a],type:"bar",markLine:{data:[{type:"average",name:"平均值"}]}});return t},initChart:function(){if(0===this.source.length)return this.$message.error("存在空数据项"),!1;this.chart=p.a.init(document.getElementById(this.chartId)),this.chart.setOption({title:{text:"".concat(this.title),textStyle:{fontWeight:"bolder",fontSize:16,color:"#000000"}},legend:{data:this.legends},tooltip:{trigger:"axis"},toolbox:{show:!0,itemGap:20,feature:{dataView:{title:"数据视图"},magicType:{show:!0,type:["bar","line"]},saveAsImage:{show:!0},restore:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",name:this.xAxisName},dataset:{source:this.source},series:this._initSeries(),yAxis:[{type:"value"}]},!0)}}},m=g,b=a("2877"),_=Object(b["a"])(m,d,h,!1,null,"528018da",null),y=_.exports,x={name:"ChartsData",components:{Histogram:y},props:{currChartsData:{type:Array,default:null},xAliasName:{type:String,default:""},legends:{type:Array,default:null}}},k=x,V=(a("cda4"),Object(b["a"])(k,u,c,!1,null,"22d75366",null)),w=V.exports,O=a("7c1d"),C={name:"DataDistribution",components:{ChartsData:w,PanelTop:O["a"]},data:function(){return{loading:!1,fieldOptions:l["b"],passiveOptions:[],extraOptions:l["a"],fieldValue:"task_id",dateValue:[],passiveValue:[],extraValue:"cat_ids",UidCountTable:[],keys:[],currChartsData:null,showCharts:!1}},watch:{dateValue:function(t){t.length>5&&(this.dateValue.length=5,this.$notify({title:"非法输入",message:"最多同时显示五天的数据",type:"warning"}))}},created:function(){this._initApiData()},methods:{change:function(){var t=Object(o["a"])();this.dateValue=this.dateValue.filter(function(e){return!(Object(o["a"])(e)>t)})},searchTargetValue:function(){var t=this;if("task_id"===this.fieldValue){if(0===this.passiveValue.length)return void this.$message.error("task_id筛选项为空");if(this.passiveValue.length>5)return void this.$message.error("最多同时展示5条数据");this.loading=!0;var e=JSON.stringify(this.passiveValue);Object(r["d"])(e,this.extraValue).then(function(e){var a=Object(i["b"])("task_id",e.data,t.extraValue),s=a.chartsMap,n=a.uidCountMap,r=a.legends;t.currChartsData=s,t.UidCountTable=n,t.keys=r,t.showCharts=!0,t.loading=!1}).catch(function(e){console.error(e),t.loading=!1,t.$notify({message:"请检查网络后重试"})})}else{if(0===this.dateValue.length)return void this.$message.error("date_time筛选项为空");this.loading=!0;var a=Object(i["d"])(this.dateValue);Object(r["b"])(a,this.extraValue).then(function(e){var a=Object(i["b"])("date_time",e.data,t.extraValue),s=a.chartsMap,n=a.uidCountMap,r=a.legends;t.currChartsData=s,t.UidCountTable=n,t.keys=r,t.showCharts=!0,t.loading=!1}).catch(function(e){console.error(e),t.loading=!1,t.$notify({message:"请检查网络后重试"})})}},_initDefaultValues:function(){this.passiveValue=[this.passiveOptions[0].value],this.extraValue=this.extraOptions[0].value,this.searchTargetValue()},_initApiData:function(){var t=this;Object(r["c"])().then(function(e){var a=e.data.taskIds;t.passiveOptions=Object(i["c"])(a),t._initDefaultValues()})}}},j=C,D=Object(b["a"])(j,s,n,!1,null,"f29ff43c",null);e["default"]=D.exports},cda4:function(t,e,a){"use strict";var s=a("b8de"),n=a.n(s);n.a},f23a:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"c",function(){return i}),a.d(e,"d",function(){return r}),a.d(e,"b",function(){return l});a("5df3"),a("1c4c"),a("28a5"),a("456d"),a("ac6a");var s=a("c466");function n(t){var e=t.dsp_monitor_task,a=t.dsp_monitor_day,s=[],n=[];function i(t){var e=[],a=1;return Object.keys(t).forEach(function(t){e.push({field:t,index:a++})}),e}return s=i(e),n=i(a),s.forEach(function(t){Object.assign(t,e[t.field]["coverage"])}),n.forEach(function(t){Object.assign(t,a[t.field]["coverage"])}),{coverages_task_id:s,coverages_day:n}}function i(t){var e=[];return t&&(t=t.split(","),t.forEach(function(t){e.push({value:t,lable:t})})),e}function r(t){var e=[];return t.forEach(function(t){e.push(Object(s["a"])(t))}),JSON.stringify(e)}function l(t,e,a){var s={task_id:"dsp_monitor_task",date_time:"dsp_monitor_day"},n=e[s[t]],i=[];Object.keys(n).forEach(function(t){i.push({key:t,uid_count:n[t]["uid_count"]})});var r=Array.from(Object.keys(n)).length,l=[],o=[];Object.keys(n).forEach(function(t){o.push(t)});var u=[],c=i[0].key+"";Object.keys(n[c][a]).forEach(function(t){u.push(t),l.push([t])});for(var d=0;d<r;d++)for(var h=n[i[d].key][a],f=0;f<u.length;f++)l[f].push(h[u[f]]);return{chartsMap:l,uidCountMap:i,legends:o}}},f8a7:function(t,e,a){}}]);