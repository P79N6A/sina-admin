(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5538bea5"],{"0301":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticClass:"header-text-line-height h1-font header-bottom-border"},[e._v("\n    覆盖率统计\n  ")]),e._v(" "),a("el-main",[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.fieldValue,callback:function(t){e.fieldValue=t},expression:"fieldValue"}},e._l(e.fieldOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-row",{staticClass:"common-container top-radius"},[a("el-col",{attrs:{span:24}},[a("panel-top",{attrs:{title:"覆盖率统计查询结果"}}),e._v(" "),a("el-row",[a("el-col",{attrs:{span:4,offset:1}},[a("el-container",[a("el-main",{staticClass:"bold-weight-font"},[e._v("\n                每页显示：\n              ")]),e._v(" "),a("el-footer",[a("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.paginationValue,callback:function(t){e.paginationValue=t},expression:"paginationValue"}},e._l(e.paginationOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6,offset:4}},[a("el-container",[a("el-main",{staticClass:"bold-weight-font"},[e._v("\n                查询：\n              ")]),e._v(" "),a("el-footer",[a("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:e.filterValue,callback:function(t){e.filterValue=t},expression:"filterValue"}},[a("template",{slot:"prepend"},[e._v("field")])],2)],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("data-table",{attrs:{"field-value":e.fieldValue,"filter-value":e.filterValue,"pagination-value":e.paginationValue}})],1)],1)],1)],1)],1),e._v(" "),a("el-footer")],1)},l=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","default-sort":{prop:"date",order:"descending"}}},[a("el-table-column",{attrs:{prop:"index",label:"序号",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"field",label:"field",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reg_time",label:"reg_time",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"uid",label:"uid",sortable:"",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gender",label:"gender",sortable:"",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"age",label:"age",sortable:"",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tag_ids",label:"tag_ids",sortable:"",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cat_ids",label:"cat_ids",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"city_level",label:"city_level",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"obj_ids",label:"obj_ids",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_type_id",label:"user_type_id",sortable:"",width:"140"}})],1),e._v(" "),a("el-row",[0!==e.tableData.length?a("el-col",{staticClass:"page-text h3-font",attrs:{span:8,offset:1}},[e._v("\n      从 "+e._s(e.tableData[0].index)+" 到 "+e._s(e.tableData[e.tableData.length-1].index)+" /总共 "+e._s(e.wholeData.length)+" 条数据\n    ")]):a("el-col",{staticClass:"h3-font page-text",attrs:{span:8,offset:1}},[e._v("\n      数据为空/\n      "),a("span",[e._v("(过滤总条数 "+e._s(e.currWholeLength)+" 条)")])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12,offset:6}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.wholeData.length,"page-size":e.page_size,"hide-on-single-page":"true","current-page":e.currPageIndex},on:{"current-change":e.sizeChange}})],1)],1)],1)},r=[],o=(a("ac6a"),a("c5f6"),a("f23a")),s=a("6a25"),c={name:"DataTable",props:{fieldValue:{type:String,default:"task_id"},filterValue:{type:String,default:""},paginationValue:{type:Number,default:50}},data:function(){return{wholeData:[],coverages_task_id:[],coverages_day:[],currWholeLength:0,tableData:[],prevFilterLength:0,page_size:this.paginationValue,currPageIndex:1,hasFiltered:!1,prevWholeDataLength:0,fieldMap:{task_id:[],date_time:[]}}},watch:{paginationValue:function(e){this.page_size=e,this.sizeChange()},fieldValue:function(e){this.wholeData=this.fieldMap[e],this.currWholeLength=this.fieldMap[e].length,this.sizeChange()},filterValue:function(e){var t=this,a=e.length;if(this.prevFilterLength>a&&(this.wholeData=this.fieldMap[this.fieldValue],this.currPageIndex=1),this.prevFilterLength=a,this.wholeData=this.wholeData.filter(function(n){return t._getSliceValue(n.field,a)===e}),this.prevWholeDataLength=this.wholeData.length,0===this.wholeData.length)return this.tableData=[],0;this._resetIndex(),this.sizeChange(),this.currPageIndex=1}},created:function(){this._initData()},methods:{_getSliceValue:function(e,t){return e.slice(0,t)},_resetIndex:function(){this.wholeData.forEach(function(e,t){e.index=t+1})},_initData:function(){var e,t=this;Object(s["a"])().then(function(a){e=Object(o["a"])(a.data),t.coverages_task_id=e.coverages_task_id,t.coverages_day=e.coverages_day,t.wholeData=t.coverages_task_id,t.fieldMap["task_id"]=t.coverages_task_id,t.fieldMap["date_time"]=t.coverages_day,t.currWholeLength=t.fieldMap[t.fieldValue].length,t.sizeChange()}).catch(function(e){t.$notify({title:"未知错误",message:"请检查网络刷新重试",type:"error"}),console.error(e)})},sizeChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.tableData=this.wholeData.slice((e-1)*this.paginationValue,e*this.paginationValue)}}},u=c,d=(a("d3c7"),a("2877")),f=Object(d["a"])(u,i,r,!1,null,"48bb980a",null),p=f.exports,h=a("7c1d"),g=a("19f9"),_={name:"CoverageStatistics",components:{DataTable:p,PanelTop:h["a"]},data:function(){return{fieldOptions:g["b"],fieldValue:"task_id",paginationOptions:g["c"],paginationValue:50,filterValue:""}}},v=_,b=Object(d["a"])(v,n,l,!1,null,"5207a2e7",null);t["default"]=b.exports},"19f9":function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return l}),a.d(t,"c",function(){return i});var n=[{value:"cat_ids",label:"cat_ids"},{value:"city_level",label:"city_level"},{value:"obj_ids",label:"obj_ids"},{value:"user_type_id",label:"user_type_id"},{value:"reg_time",label:"reg_time"},{value:"gender",label:"gender"},{value:"age",label:"age"},{value:"tag_ids",label:"tag_ids"},{value:"value",label:"value"}],l=[{value:"task_id",label:"task_id"},{value:"date_time",label:"date_time"}],i=[{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]},"6a25":function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"d",function(){return r}),a.d(t,"c",function(){return s}),a.d(t,"b",function(){return o});var n=a("a27e"),l=a("f8c8");function i(){return Object(n["a"])({url:"".concat(l["b"],"/Dsp_data/dspFeaDataStat"),method:"get",params:{cip:l["a"],source:l["c"],type:"coverage",taskIds:"all",dts:"all"}})}function r(e,t){return Object(n["a"])({url:"".concat(l["b"],"/Dsp_data/dspFeaDataStat"),method:"get",params:{cip:l["a"],source:l["c"],type:t,taskIds:e,dts:"[]"}})}function o(e,t){return Object(n["a"])({url:"".concat(l["b"],"/4/data/dspFeaDataStat"),method:"get",params:{cip:230,source:l["c"],type:t,taskIds:"[]",dts:e}})}function s(){return Object(n["a"])({url:"".concat(l["b"],"/4/data/dspFeaDataStat"),method:"get",params:{source:l["c"],cip:230,taskIds:"[]",dts:"[]",type:"all",isTaskIds:!0,isDts:!0}})}},a27e:function(e,t,a){"use strict";var n=a("bc3a"),l=a.n(n),i=l.a.create({baseURL:"",timeout:5e3});i.interceptors.request.use(),i.interceptors.response.use(),t["a"]=i},c06f:function(e,t,a){},c466:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date,l=n.getMonth()+1+t<10?"0".concat(n.getMonth()+1):n.getMonth()+1+t,i=n.getDate()+a<10?"0".concat(n.getDate()):n.getDate()+a;return"".concat(n.getFullYear()+e).concat(l).concat(i)}function l(e){var t=e?new Date(e):new Date;return{timestamp:Date.parse(t),year:t.getFullYear(),month:t.getMonth()+1<10?"0".concat(t.getMonth()+1):t.getMonth()+1,day:t.getDate()<10?"0".concat(t.getDate()):t.getDate(),hour:t.getHours()<10?"0".concat(t.getHours()):t.getHours(),minute:t.getMinutes()<10?"0".concat(t.getMinutes()):t.getMinutes(),second:t.getSeconds()<10?"0".concat(t.getSeconds()):t.getSeconds()}}a.d(t,"a",function(){return n}),a.d(t,"b",function(){return l})},d3c7:function(e,t,a){"use strict";var n=a("c06f"),l=a.n(n);l.a},f23a:function(e,t,a){"use strict";a.d(t,"a",function(){return l}),a.d(t,"c",function(){return i}),a.d(t,"d",function(){return r}),a.d(t,"b",function(){return o});a("5df3"),a("1c4c"),a("28a5"),a("456d"),a("ac6a");var n=a("c466");function l(e){var t=e.dsp_monitor_task,a=e.dsp_monitor_day,n=[],l=[];function i(e){var t=[],a=1;return Object.keys(e).forEach(function(e){t.push({field:e,index:a++})}),t}return n=i(t),l=i(a),n.forEach(function(e){Object.assign(e,t[e.field]["coverage"])}),l.forEach(function(e){Object.assign(e,a[e.field]["coverage"])}),{coverages_task_id:n,coverages_day:l}}function i(e){var t=[];return e&&(e=e.split(","),e.forEach(function(e){t.push({value:e,lable:e})})),t}function r(e){var t=[];return e.forEach(function(e){t.push(Object(n["a"])(0,0,0,e))}),JSON.stringify(t)}function o(e,t,a){var n={task_id:"dsp_monitor_task",date_time:"dsp_monitor_day"},l=t[n[e]],i=[];Object.keys(l).forEach(function(e){i.push({key:e,uid_count:l[e]["uid_count"]})});var r=Array.from(Object.keys(l)).length,o=[],s=[];Object.keys(l).forEach(function(e){s.push(e)});var c=[],u=i[0].key+"";Object.keys(l[u][a]).forEach(function(e){c.push(e),o.push([e])});for(var d=0;d<r;d++)for(var f=l[i[d].key][a],p=0;p<c.length;p++)o[p].push(f[c[p]]);return{chartsMap:o,uidCountMap:i,legends:s}}},f8c8:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"c",function(){return l}),a.d(t,"a",function(){return i});var n="",l="3567320871234567890",i=230}}]);